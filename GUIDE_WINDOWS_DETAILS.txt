================================================================================
  GUIDE COMPLET Ã‰TAPE PAR Ã‰TAPE - WINDOWS 10 (PowerShell/CMD)
  House Price MLOPS Project - DÃ©ploiement Complet
================================================================================

Ce guide vous explique chaque Ã©tape en dÃ©tail pour que vous compreniez
exactement ce que vous faites Ã  chaque moment.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Ã‰TAPE 0 : PRÃ‰PARATION INITIALE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

QUOI FAIRE : Ouvrir PowerShell en tant qu'administrateur
POURQUOI : Pour avoir les permissions nÃ©cessaires pour certaines opÃ©rations

COMMENT :
1. Cliquez sur le bouton DÃ©marrer de Windows
2. Tapez "PowerShell"
3. Clic droit sur "Windows PowerShell"
4. SÃ©lectionnez "ExÃ©cuter en tant qu'administrateur"
5. Cliquez sur "Oui" si Windows demande la permission


VÃ‰RIFICATION DES PRÃ‰REQUIS
---------------------------

Avant de commencer, vÃ©rifions que tout est installÃ© sur votre ordinateur.

Ã‰TAPE 1.1 : VÃ©rifier si Python est installÃ©
--------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
python --version

CE QUE Ã‡A FAIT : Affiche la version de Python installÃ©e
RÃ‰SULTAT ATTENDU : Quelque chose comme "Python 3.9.x" ou "Python 3.10.x"
SI Ã‡A NE MARCHE PAS : 
  - Python n'est pas installÃ©
  - Python n'est pas dans le PATH Windows
  - SOLUTION : Installez Python depuis https://www.python.org/downloads/
  - IMPORTANT : Cochez "Add Python to PATH" lors de l'installation


Ã‰TAPE 1.2 : VÃ©rifier si Git est installÃ©
-----------------------------------------
COMMANDE Ã€ COPIER-COLLER :
git --version

CE QUE Ã‡A FAIT : Affiche la version de Git installÃ©e
RÃ‰SULTAT ATTENDU : Quelque chose comme "git version 2.x.x"
SI Ã‡A NE MARCHE PAS : 
  - Git n'est pas installÃ©
  - SOLUTION : Installez Git depuis https://git-scm.com/download/win


Ã‰TAPE 1.3 : VÃ©rifier si Docker est installÃ© (Optionnel pour le moment)
------------------------------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
docker --version

CE QUE Ã‡A FAIT : Affiche la version de Docker installÃ©e
RÃ‰SULTAT ATTENDU : Quelque chose comme "Docker version 20.x.x"
SI Ã‡A NE MARCHE PAS : 
  - Docker Desktop n'est pas installÃ©
  - SOLUTION : Installez Docker Desktop depuis https://www.docker.com/products/docker-desktop
  - Note : Vous pouvez le faire plus tard si vous voulez tester Docker localement


Ã‰TAPE 1.4 : VÃ©rifier si Azure CLI est installÃ© (Pour le dÃ©ploiement)
----------------------------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
az --version

CE QUE Ã‡A FAIT : Affiche la version d'Azure CLI installÃ©e
RÃ‰SULTAT ATTENDU : Beaucoup de texte avec des versions
SI Ã‡A NE MARCHE PAS : 
  - Azure CLI n'est pas installÃ©
  - SOLUTION : Installez Azure CLI depuis https://aka.ms/installazurecliwindows
  - OU utilisez cette commande dans PowerShell (en tant qu'admin) :
    Invoke-WebRequest -Uri https://aka.ms/installazurecliwindows -OutFile .\AzureCLI.msi; Start-Process msiexec.exe -Wait -ArgumentList '/I AzureCLI.msi /quiet'; rm .\AzureCLI.msi


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 1 : CONFIGURATION ET TESTS LOCAUX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 1 : Aller dans le dossier du projet
------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
cd "C:\Users\mlkam\OneDrive\Desktop\Projet Deploiement Modele\house_price_mlops"

CE QUE Ã‡A FAIT : Change le rÃ©pertoire de travail vers votre projet
EXPLICATION : PowerShell doit savoir oÃ¹ se trouve votre projet pour exÃ©cuter les commandes
VÃ‰RIFICATION : Vous devriez voir le chemin dans votre PowerShell aprÃ¨s cette commande


Ã‰TAPE 2 : CrÃ©er un environnement virtuel Python
------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
python -m venv venv

CE QUE Ã‡A FAIT : CrÃ©e un dossier "venv" qui contient un Python isolÃ© pour ce projet
POURQUOI C'EST IMPORTANT : 
  - Ã‰vite les conflits entre diffÃ©rents projets
  - Permet d'avoir des versions spÃ©cifiques de packages pour ce projet
  - C'est une bonne pratique en Python
TEMPS : 30 secondes Ã  1 minute


Ã‰TAPE 3 : Activer l'environnement virtuel
------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
.\venv\Scripts\Activate.ps1

CE QUE Ã‡A FAIT : Active l'environnement virtuel que vous venez de crÃ©er
RÃ‰SULTAT ATTENDU : Vous verrez "(venv)" au dÃ©but de chaque ligne de commande
EXPLICATION : Maintenant, toutes les installations Python iront dans ce projet spÃ©cifique

SI Ã‡A NE MARCHE PAS (erreur d'exÃ©cution de script) :
  - Windows bloque l'exÃ©cution des scripts PowerShell
  - SOLUTION : ExÃ©cutez cette commande dans PowerShell EN TANT QU'ADMINISTRATEUR :
    Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
  - Puis rÃ©essayez : .\venv\Scripts\Activate.ps1


Ã‰TAPE 4 : Mettre Ã  jour pip (gestionnaire de packages Python)
--------------------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
python -m pip install --upgrade pip

CE QUE Ã‡A FAIT : Met Ã  jour pip vers la derniÃ¨re version
EXPLICATION : pip est l'outil qui installe les packages Python
POURQUOI : Pour Ãªtre sÃ»r d'avoir la derniÃ¨re version qui fonctionne bien
TEMPS : 30 secondes


Ã‰TAPE 5 : Installer toutes les dÃ©pendances du projet
------------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
pip install -r requirements.txt

CE QUE Ã‡A FAIT : Lit le fichier requirements.txt et installe tous les packages listÃ©s dedans
EXPLICATION : 
  - requirements.txt contient la liste de tous les packages nÃ©cessaires (FastAPI, scikit-learn, etc.)
  - pip installe chacun d'eux avec la bonne version
POURQUOI : Votre projet a besoin de ces packages pour fonctionner
TEMPS : 2 Ã  5 minutes (selon votre connexion Internet)
RÃ‰SULTAT ATTENDU : Beaucoup de texte montrant l'installation de chaque package


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 2 : PRÃ‰PARATION DES DONNÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 6 : VÃ©rifier que le fichier de donnÃ©es existe
-----------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
Test-Path "data\house_prices.csv"

CE QUE Ã‡A FAIT : VÃ©rifie si le fichier existe
RÃ‰SULTAT ATTENDU : 
  - Si Ã§a affiche "True" : Le fichier existe, vous pouvez continuer
  - Si Ã§a affiche "False" : Le fichier n'existe pas

SI LE FICHIER N'EXISTE PAS :
  - Vous devez placer votre fichier house_prices.csv dans le dossier "data"
  - Si vous n'avez pas le fichier, vous devrez le tÃ©lÃ©charger ou le crÃ©er


Ã‰TAPE 7 : PrÃ©parer les donnÃ©es (nettoyage et transformation)
-------------------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
python prepare_data.py

CE QUE Ã‡A FAIT : 
  - Lit le fichier data/house_prices.csv
  - Nettoie les donnÃ©es (supprime les valeurs manquantes)
  - Renomme les colonnes (enlÃ¨ve les espaces)
  - CrÃ©e un nouveau fichier : data/house_prices_clean.csv

EXPLICATION : Les donnÃ©es brutes ont besoin d'Ãªtre nettoyÃ©es avant de les utiliser
TEMPS : 5 Ã  10 secondes
RÃ‰SULTAT ATTENDU : 
  - Des messages affichÃ©s montrant le processus
  - Un message "âœ… DonnÃ©es prÃ©parÃ©es avec succÃ¨s !"
  - Le fichier data/house_prices_clean.csv est crÃ©Ã©

VÃ‰RIFICATION :
COMMANDE :
Test-Path "data\house_prices_clean.csv"

RÃ‰SULTAT ATTENDU : "True" (le fichier nettoyÃ© existe)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 3 : ENTRÃ€INEMENT DU MODÃˆLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 8 : EntraÃ®ner le modÃ¨le de Machine Learning
--------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
python train_model.py

CE QUE Ã‡A FAIT :
  1. Charge les donnÃ©es nettoyÃ©es
  2. Divise les donnÃ©es en donnÃ©es d'entraÃ®nement (80%) et de test (20%)
  3. EntraÃ®ne un modÃ¨le Random Forest
  4. Ã‰value les performances du modÃ¨le
  5. Sauvegarde le modÃ¨le dans model/house_price_model.pkl
  6. CrÃ©e des graphiques (prediction_vs_actual.png, feature_importance.png)
  7. Enregistre tout dans MLflow (outil de suivi des expÃ©riences ML)

EXPLICATION :
  - Random Forest : Un algorithme de Machine Learning qui apprend Ã  prÃ©dire les prix
  - Le modÃ¨le apprend des exemples de maisons avec leurs prix
  - Ensuite, il peut prÃ©dire le prix de nouvelles maisons

TEMPS : 30 secondes Ã  2 minutes
RÃ‰SULTAT ATTENDU :
  - Des messages montrant le processus
  - Ã€ la fin, vous verrez :
    ==================================================
    RÃ‰SULTATS DE L'ENTRAÃNEMENT
    ==================================================
    RMSE : $XXXXX.XX
    RÂ²   : 0.XXXX
    ==================================================
  - RMSE : Erreur moyenne (plus c'est bas, mieux c'est)
  - RÂ² : QualitÃ© de prÃ©diction (plus proche de 1, mieux c'est)

VÃ‰RIFICATIONS :
1. VÃ©rifier que le modÃ¨le est crÃ©Ã© :
   COMMANDE : Test-Path "model\house_price_model.pkl"
   RÃ‰SULTAT ATTENDU : "True"

2. VÃ©rifier que les graphiques sont crÃ©Ã©s :
   COMMANDE : Test-Path "prediction_vs_actual.png"
   RÃ‰SULTAT ATTENDU : "True"


Ã‰TAPE 9 (Optionnel) : Voir les rÃ©sultats dans MLflow
-----------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
mlflow ui --port 5000

CE QUE Ã‡A FAIT : Lance un serveur web local qui affiche les rÃ©sultats de l'entraÃ®nement
POURQUOI : Pour voir les mÃ©triques, les graphiques, et comparer diffÃ©rentes expÃ©riences
TEMPS : Quelques secondes pour dÃ©marrer
RÃ‰SULTAT ATTENDU : Un message disant que le serveur est lancÃ©

POUR VOIR LES RÃ‰SULTATS :
  1. Ouvrez votre navigateur web (Chrome, Edge, Firefox)
  2. Allez Ã  l'adresse : http://localhost:5000
  3. Vous verrez une interface avec vos expÃ©riences ML

POUR ARRÃŠTER MLFLOW :
  - Appuyez sur Ctrl + C dans le PowerShell


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 4 : TESTER L'API LOCALEMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 10 : Lancer l'API FastAPI
--------------------------------
COMMANDE Ã€ COPIER-COLLER :
uvicorn app.main:app --reload --port 8000

CE QUE Ã‡A FAIT :
  - Lance un serveur web qui expose votre modÃ¨le via une API
  - --reload : RedÃ©marre automatiquement si vous modifiez le code (pratique pour le dÃ©veloppement)
  - --port 8000 : L'API sera accessible sur le port 8000

EXPLICATION :
  - Une API (Application Programming Interface) permet Ã  d'autres programmes de communiquer avec votre modÃ¨le
  - Au lieu d'exÃ©cuter Python Ã  chaque fois, l'API reste active et rÃ©pond aux requÃªtes

TEMPS : Quelques secondes pour dÃ©marrer
RÃ‰SULTAT ATTENDU :
  - Des messages montrant que l'API dÃ©marre
  - Un message final : "Uvicorn running on http://127.0.0.1:8000"
  - L'API reste active (ne fermez pas cette fenÃªtre PowerShell)

IMPORTANT : Gardez cette fenÃªtre PowerShell ouverte ! L'API doit tourner en continu.


Ã‰TAPE 11 : Tester l'API (dans un NOUVEAU PowerShell)
-----------------------------------------------------
Ouvrez un NOUVEAU PowerShell (laissez l'autre ouvert avec l'API qui tourne)

Ã‰TAPE 11.1 : Tester la page d'accueil
--------------------------------------
COMMANDE Ã€ COPIER-COLLER :
Invoke-WebRequest -Uri http://localhost:8000/ -UseBasicParsing

CE QUE Ã‡A FAIT : Envoie une requÃªte HTTP GET Ã  l'API
RÃ‰SULTAT ATTENDU : 
  - StatusCode : 200 (Ã§a veut dire que Ã§a a marchÃ©)
  - Content : Un JSON avec des informations sur l'API

POUR VOIR LE RÃ‰SULTAT MIEUX :
COMMANDE :
(Invoke-WebRequest -Uri http://localhost:8000/ -UseBasicParsing).Content

CE QUE Ã‡A FAIT : Affiche seulement le contenu de la rÃ©ponse


Ã‰TAPE 11.2 : Tester le health check
------------------------------------
COMMANDE Ã€ COPIER-COLLER :
Invoke-WebRequest -Uri http://localhost:8000/health -UseBasicParsing

CE QUE Ã‡A FAIT : VÃ©rifie que l'API fonctionne et que le modÃ¨le est chargÃ©
RÃ‰SULTAT ATTENDU :
  - StatusCode : 200
  - Content : {"status":"healthy","model_loaded":true}


Ã‰TAPE 11.3 : Faire une prÃ©diction (le vrai test !)
---------------------------------------------------
COMMANDE Ã€ COPIER-COLLER :
$body = @{
    GrLivArea = 1500.0
    BedroomAbvGr = 3
    FullBath = 2
    YearBuilt = 2000
    TotalBsmtSF = 800.0
} | ConvertTo-Json

$response = Invoke-WebRequest -Uri http://localhost:8000/predict -Method POST -Body $body -ContentType "application/json" -UseBasicParsing

$response.Content

CE QUE Ã‡A FAIT :
  1. CrÃ©e un objet JSON avec les caractÃ©ristiques d'une maison
  2. Envoie une requÃªte POST Ã  l'API avec ces donnÃ©es
  3. L'API utilise le modÃ¨le pour prÃ©dire le prix
  4. Affiche la rÃ©ponse (le prix prÃ©dit)

EXPLICATION :
  - GrLivArea : Surface habitable (1500 pieds carrÃ©s)
  - BedroomAbvGr : Nombre de chambres (3)
  - FullBath : Nombre de salles de bain (2)
  - YearBuilt : AnnÃ©e de construction (2000)
  - TotalBsmtSF : Surface du sous-sol (800 pieds carrÃ©s)

RÃ‰SULTAT ATTENDU :
  - Quelque chose comme : {"predicted_price":185234.56,"price_range":"Medium"}
  - predicted_price : Le prix prÃ©dit par le modÃ¨le
  - price_range : La catÃ©gorie (Low, Medium, High, Very High)


Ã‰TAPE 11.4 : Voir la documentation Swagger
-------------------------------------------
Dans votre navigateur web, allez Ã  :
http://localhost:8000/docs

CE QUE Ã‡A FAIT : Affiche une interface graphique pour tester l'API
POURQUOI C'EST UTILE :
  - Vous pouvez tester tous les endpoints facilement
  - Vous voyez la structure des donnÃ©es attendues
  - Pas besoin de taper des commandes PowerShell

COMMENT UTILISER :
  1. Cliquez sur "POST /predict"
  2. Cliquez sur "Try it out"
  3. Modifiez les valeurs dans le champ "Request body"
  4. Cliquez sur "Execute"
  5. Vous verrez la rÃ©ponse en bas


Ã‰TAPE 12 : Tester la dÃ©tection de drift (Optionnel)
-----------------------------------------------------
Ã‰TAPE 12.1 : GÃ©nÃ©rer des donnÃ©es de test
-----------------------------------------
Dans le PowerShell oÃ¹ l'API tourne, arrÃªtez-la (Ctrl+C), puis :
COMMANDE :
python drift_data_gen.py

CE QUE Ã‡A FAIT : GÃ©nÃ¨re un fichier data/production_data.csv avec des donnÃ©es similaires aux donnÃ©es d'entraÃ®nement mais avec un lÃ©ger "drift" (changement dans la distribution)
POURQUOI : Pour tester la fonctionnalitÃ© de dÃ©tection de drift


Ã‰TAPE 12.2 : Relancer l'API
----------------------------
COMMANDE :
uvicorn app.main:app --reload --port 8000


Ã‰TAPE 12.3 : Tester la dÃ©tection de drift
------------------------------------------
Dans le NOUVEAU PowerShell :
COMMANDE :
Invoke-WebRequest -Uri "http://localhost:8000/drift/check?threshold=0.05" -Method POST -UseBasicParsing

CE QUE Ã‡A FAIT : Compare les donnÃ©es de production avec les donnÃ©es d'entraÃ®nement pour dÃ©tecter des changements
EXPLICATION : Si les donnÃ©es changent trop, le modÃ¨le peut devenir moins prÃ©cis


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 5 : TESTS UNITAIRES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 13 : ExÃ©cuter les tests automatiques
--------------------------------------------
Dans le PowerShell (l'API peut Ãªtre arrÃªtÃ©e pour cette Ã©tape) :
COMMANDE :
pytest tests/ -v

CE QUE Ã‡A FAIT : ExÃ©cute tous les tests dÃ©finis dans le dossier tests/
EXPLICATION : Les tests vÃ©rifient automatiquement que l'API fonctionne correctement
TEMPS : 5 Ã  10 secondes
RÃ‰SULTAT ATTENDU :
  - Vous verrez plusieurs tests s'exÃ©cuter
  - Chaque test devrait montrer "PASSED" (rÃ©ussi)
  - Ã€ la fin : "X passed" (X = nombre de tests)


EXÃ‰CUTER LES TESTS AVEC COUVERTURE DE CODE :
---------------------------------------------
COMMANDE :
pytest tests/ -v --cov=app --cov-report=term

CE QUE Ã‡A FAIT :
  - ExÃ©cute les tests
  - Mesure quelle partie du code est testÃ©e (couverture)
  - Affiche un rapport montrant quel pourcentage du code est couvert par les tests

POURQUOI C'EST UTILE : Pour savoir si vous avez assez de tests


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 6 : DOCKER (Optionnel - pour tester localement)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AVANT DE COMMENCER :
  - Assurez-vous que Docker Desktop est installÃ© et en cours d'exÃ©cution
  - Vous devriez voir l'icÃ´ne Docker dans la barre des tÃ¢ches Windows


Ã‰TAPE 14 : VÃ©rifier que le modÃ¨le existe
------------------------------------------
COMMANDE :
Test-Path "model\house_price_model.pkl"

RÃ‰SULTAT ATTENDU : "True"
SI "False" : Vous devez d'abord entraÃ®ner le modÃ¨le (Ã‰TAPE 8)


Ã‰TAPE 15 : Construire l'image Docker
-------------------------------------
COMMANDE :
docker build -t house-price-api:local .

CE QUE Ã‡A FAIT :
  - Lit le fichier Dockerfile
  - CrÃ©e une image Docker contenant votre application
  - -t house-price-api:local : Donne un nom et un tag Ã  l'image
  - . : Indique que le Dockerfile est dans le dossier actuel

EXPLICATION :
  - Une image Docker : C'est comme une photo de votre application avec tout ce qu'elle a besoin
  - Dockerfile : Le plan de construction de l'image

TEMPS : 2 Ã  5 minutes
RÃ‰SULTAT ATTENDU : Beaucoup de texte montrant le processus de construction, puis "Successfully built"


VÃ‰RIFIER QUE L'IMAGE EST CRÃ‰Ã‰E :
---------------------------------
COMMANDE :
docker images

CE QUE Ã‡A FAIT : Liste toutes les images Docker sur votre ordinateur
RÃ‰SULTAT ATTENDU : Vous devriez voir "house-price-api" avec le tag "local"


Ã‰TAPE 16 : Lancer un container Docker
---------------------------------------
COMMANDE :
docker run -d -p 8000:8000 --name house-price-test house-price-api:local

CE QUE Ã‡A FAIT :
  - docker run : Lance un container Ã  partir de l'image
  - -d : Mode dÃ©tachÃ© (tourne en arriÃ¨re-plan)
  - -p 8000:8000 : Mappe le port 8000 du container au port 8000 de votre ordinateur
  - --name house-price-test : Donne un nom au container
  - house-price-api:local : L'image Ã  utiliser

EXPLICATION :
  - Container : Une instance en cours d'exÃ©cution de l'image
  - C'est comme exÃ©cuter l'image

RÃ‰SULTAT ATTENDU : Un ID long (l'ID du container)


VÃ‰RIFIER QUE LE CONTAINER TOURNE :
-----------------------------------
COMMANDE :
docker ps

CE QUE Ã‡A FAIT : Liste tous les containers en cours d'exÃ©cution
RÃ‰SULTAT ATTENDU : Vous devriez voir "house-price-test" dans la liste


Ã‰TAPE 17 : Voir les logs du container
---------------------------------------
COMMANDE :
docker logs house-price-test

CE QUE Ã‡A FAIT : Affiche les logs (messages) du container
POURQUOI : Pour voir si l'API a bien dÃ©marrÃ© et s'il y a des erreurs
RÃ‰SULTAT ATTENDU : Vous devriez voir des messages similaires Ã  quand vous lancez l'API localement


Ã‰TAPE 18 : Tester l'API dans le container
-------------------------------------------
Dans un NOUVEAU PowerShell :
COMMANDE :
Invoke-WebRequest -Uri http://localhost:8000/health -UseBasicParsing

CE QUE Ã‡A FAIT : Teste l'API qui tourne dans le container Docker
RÃ‰SULTAT ATTENDU : StatusCode 200 (Ã§a fonctionne !)


ARRÃŠTER ET SUPPRIMER LE CONTAINER :
------------------------------------
COMMANDE :
docker stop house-price-test

CE QUE Ã‡A FAIT : ArrÃªte le container

COMMANDE :
docker rm house-price-test

CE QUE Ã‡A FAIT : Supprime le container (pas l'image, juste le container)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 7 : DÃ‰PLOIEMENT SUR AZURE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AVANT DE COMMENCER :
  - Vous devez avoir un compte Azure (gratuit pendant 12 mois avec crÃ©dits)
  - Vous devez avoir Azure CLI installÃ© (Ã‰TAPE 1.4)
  - Vous devrez avoir une carte de crÃ©dit (mÃªme si vous utilisez le niveau gratuit)


Ã‰TAPE 19 : Se connecter Ã  Azure
---------------------------------
COMMANDE :
az login

CE QUE Ã‡A FAIT :
  1. Ouvre votre navigateur web
  2. Vous demande de vous connecter Ã  votre compte Azure
  3. Vous demande d'autoriser Azure CLI Ã  accÃ©der Ã  votre compte

EXPLICATION : Azure CLI doit Ãªtre authentifiÃ© pour pouvoir crÃ©er des ressources

CE QUI VA SE PASSER :
  1. Un message s'affiche avec une URL
  2. Votre navigateur s'ouvre automatiquement
  3. Connectez-vous avec votre compte Azure
  4. Revenez au PowerShell, vous devriez voir la liste de vos abonnements

TEMPS : 1 Ã  2 minutes


VÃ‰RIFIER QUE VOUS ÃŠTES CONNECTÃ‰ :
----------------------------------
COMMANDE :
az account show

CE QUE Ã‡A FAIT : Affiche les informations de l'abonnement actif
RÃ‰SULTAT ATTENDU : Un JSON avec des informations sur votre abonnement Azure


Ã‰TAPE 20 : Utiliser le script de dÃ©ploiement automatique (RECOMMANDÃ‰)
-----------------------------------------------------------------------
C'est la mÃ©thode la plus simple ! Le script fait tout automatiquement.

COMMANDE :
.\deploy.ps1

CE QUE Ã‡A FAIT :
  Le script exÃ©cute automatiquement toutes les Ã©tapes suivantes :
  1. VÃ©rifie que vous Ãªtes connectÃ© Ã  Azure
  2. CrÃ©e le groupe de ressources (si nÃ©cessaire)
  3. CrÃ©e Azure Container Registry (si nÃ©cessaire)
  4. Build et push l'image Docker vers Azure
  5. CrÃ©e l'environnement Container Apps (si nÃ©cessaire)
  6. CrÃ©e ou met Ã  jour la Container App
  7. Affiche l'URL de votre API dÃ©ployÃ©e

TEMPS : 5 Ã  10 minutes
RÃ‰SULTAT ATTENDU :
  - Beaucoup de messages montrant le processus
  - Ã€ la fin : "âœ… DÃ‰PLOIEMENT RÃ‰USSI !"
  - L'URL de votre API : https://votre-app.xxxxx.azurecontainerapps.io


SI LE SCRIPT NE MARCHE PAS (permission d'exÃ©cution) :
------------------------------------------------------
COMMANDE (dans PowerShell en tant qu'administrateur) :
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

Puis rÃ©essayez : .\deploy.ps1


Ã‰TAPE 21 : DÃ©ploiement manuel Ã©tape par Ã©tape (Alternative)
-------------------------------------------------------------
Si vous prÃ©fÃ©rez faire chaque Ã©tape manuellement ou si le script ne fonctionne pas :

Ã‰TAPE 21.1 : DÃ©finir les variables
-----------------------------------
COMMANDE :
$RESOURCE_GROUP = "rg-mlops-house-price"
$LOCATION = "centralus"
$ACR_NAME = "hprmlkamacr"
$CONTAINER_APP_NAME = "house-price-api"
$CONTAINERAPPS_ENV = "env-mlops-house-price"
$IMAGE_NAME = "house-price-api"
$IMAGE_TAG = "v1"

CE QUE Ã‡A FAIT : DÃ©finit des variables pour stocker les noms de vos ressources
POURQUOI : Pour Ã©viter de retaper les mÃªmes noms Ã  chaque fois
IMPORTANT : Le nom ACR ($ACR_NAME) doit Ãªtre UNIQUE globalement (pas juste sur votre compte)
            Si quelqu'un d'autre a dÃ©jÃ  pris "hprmlkamacr", changez-le (minuscules et chiffres uniquement)


Ã‰TAPE 21.2 : CrÃ©er le groupe de ressources
--------------------------------------------
COMMANDE :
az group create --name $RESOURCE_GROUP --location $LOCATION

CE QUE Ã‡A FAIT : CrÃ©e un groupe de ressources Azure
EXPLICATION :
  - Groupe de ressources : Un conteneur logique pour organiser vos ressources Azure
  - C'est comme un dossier dans lequel vous mettez toutes vos ressources
  - $LOCATION : La rÃ©gion Azure oÃ¹ crÃ©er les ressources (centralus = Ã‰tats-Unis centre)

TEMPS : 10 Ã  20 secondes
RÃ‰SULTAT ATTENDU : Un JSON confirmant la crÃ©ation du groupe de ressources


Ã‰TAPE 21.3 : CrÃ©er Azure Container Registry (ACR)
--------------------------------------------------
COMMANDE :
az acr create --resource-group $RESOURCE_GROUP --name $ACR_NAME --sku Basic --admin-enabled true

CE QUE Ã‡A FAIT : CrÃ©e un registre de conteneurs Azure
EXPLICATION :
  - ACR : Un endroit privÃ© pour stocker vos images Docker
  - C'est comme un dÃ©pÃ´t Docker privÃ© sur Azure
  - --sku Basic : Le niveau de service (Basic = le moins cher)
  - --admin-enabled true : Active l'authentification admin (nÃ©cessaire pour push/pull)

TEMPS : 1 Ã  2 minutes
RÃ‰SULTAT ATTENDU : Un JSON confirmant la crÃ©ation de l'ACR

IMPORTANT : Si vous avez une erreur "name already exists", quelqu'un d'autre a dÃ©jÃ  pris ce nom.
            Changez $ACR_NAME avec un nom unique (par exemple : hprmlkamVOTRENOMacr)


Ã‰TAPE 21.4 : RÃ©cupÃ©rer les identifiants ACR
---------------------------------------------
COMMANDE :
$ACR_USERNAME = az acr credential show --name $ACR_NAME --resource-group $RESOURCE_GROUP --query username -o tsv
$ACR_PASSWORD = az acr credential show --name $ACR_NAME --resource-group $RESOURCE_GROUP --query "passwords[0].value" -o tsv

Write-Host "ACR Username: $ACR_USERNAME"
Write-Host "ACR Password: $ACR_PASSWORD"

CE QUE Ã‡A FAIT : RÃ©cupÃ¨re le nom d'utilisateur et le mot de passe de votre ACR
EXPLICATION : Vous en aurez besoin pour que Docker puisse envoyer des images vers ACR
IMPORTANT : NOTEZ CES IDENTIFIANTS ! Vous en aurez besoin plus tard (notamment pour GitHub Actions)


Ã‰TAPE 21.5 : CrÃ©er l'environnement Container Apps
---------------------------------------------------
COMMANDE :
az containerapp env create --name $CONTAINERAPPS_ENV --resource-group $RESOURCE_GROUP --location $LOCATION

CE QUE Ã‡A FAIT : CrÃ©e un environnement Container Apps
EXPLICATION :
  - Container Apps Environment : L'infrastructure pour exÃ©cuter vos applications conteneurisÃ©es
  - C'est comme un serveur virtuel gÃ©rÃ© par Azure
  - Plusieurs Container Apps peuvent partager le mÃªme environnement

TEMPS : 2 Ã  3 minutes
RÃ‰SULTAT ATTENDU : Un JSON confirmant la crÃ©ation de l'environnement


Ã‰TAPE 21.6 : Build et push l'image Docker vers ACR
----------------------------------------------------
COMMANDE :
az acr build --registry $ACR_NAME --image "$IMAGE_NAME`:$IMAGE_TAG" --file Dockerfile .

CE QUE Ã‡A FAIT :
  1. Build l'image Docker localement
  2. Envoie (push) l'image vers votre Azure Container Registry
  3. L'image est maintenant stockÃ©e dans le cloud Azure

EXPLICATION :
  - az acr build : Utilise les ressources Azure pour builder (plus rapide que de builder localement puis push)
  - L'image sera accessible Ã  l'adresse : $ACR_NAME.azurecr.io/$IMAGE_NAME:$IMAGE_TAG

TEMPS : 3 Ã  5 minutes
RÃ‰SULTAT ATTENDU : Beaucoup de texte montrant le processus de build, puis "Run ID: ... was successful"


Ã‰TAPE 21.7 : CrÃ©er la Container App
-------------------------------------
COMMANDE :
az containerapp create `
  --name $CONTAINER_APP_NAME `
  --resource-group $RESOURCE_GROUP `
  --environment $CONTAINERAPPS_ENV `
  --image "$ACR_NAME.azurecr.io/$IMAGE_NAME`:$IMAGE_TAG" `
  --registry-server "$ACR_NAME.azurecr.io" `
  --registry-username $ACR_USERNAME `
  --registry-password $ACR_PASSWORD `
  --target-port 8000 `
  --ingress external `
  --cpu 1.0 `
  --memory 2.0Gi

CE QUE Ã‡A FAIT : CrÃ©e une Container App qui exÃ©cute votre API
EXPLICATION :
  - Container App : Votre application dÃ©ployÃ©e sur Azure
  - --target-port 8000 : Le port oÃ¹ votre API Ã©coute
  - --ingress external : Rend l'application accessible depuis Internet (avec une URL publique)
  - --cpu 1.0 : 1 processeur virtuel
  - --memory 2.0Gi : 2 Go de mÃ©moire RAM
  - --registry-* : Les identifiants pour accÃ©der Ã  l'image Docker dans ACR

TEMPS : 2 Ã  3 minutes
RÃ‰SULTAT ATTENDU : Un JSON confirmant la crÃ©ation de la Container App


Ã‰TAPE 21.8 : RÃ©cupÃ©rer l'URL de votre API
-------------------------------------------
COMMANDE :
$APP_URL = az containerapp show --name $CONTAINER_APP_NAME --resource-group $RESOURCE_GROUP --query properties.configuration.ingress.fqdn -o tsv
Write-Host "Votre API est disponible Ã  : https://$APP_URL"

CE QUE Ã‡A FAIT : RÃ©cupÃ¨re l'URL publique de votre API
EXPLICATION :
  - FQDN : Fully Qualified Domain Name (nom de domaine complet)
  - C'est l'adresse web oÃ¹ votre API est accessible

RÃ‰SULTAT ATTENDU : Une URL comme : https://house-price-api.xxxxx.azurecontainerapps.io


Ã‰TAPE 22 : Tester l'API dÃ©ployÃ©e
----------------------------------
Ã‰TAPE 22.1 : Health check
--------------------------
COMMANDE :
Invoke-WebRequest -Uri "https://$APP_URL/health" -UseBasicParsing

CE QUE Ã‡A FAIT : VÃ©rifie que l'API fonctionne sur Azure
RÃ‰SULTAT ATTENDU : StatusCode 200 avec {"status":"healthy","model_loaded":true}

ATTENTION : L'API peut prendre 1 Ã  2 minutes pour dÃ©marrer complÃ¨tement. Si vous avez une erreur, attendez un peu et rÃ©essayez.


Ã‰TAPE 22.2 : Faire une prÃ©diction
-----------------------------------
COMMANDE :
$body = @{
    GrLivArea = 1500.0
    BedroomAbvGr = 3
    FullBath = 2
    YearBuilt = 2000
    TotalBsmtSF = 800.0
} | ConvertTo-Json

$response = Invoke-WebRequest -Uri "https://$APP_URL/predict" -Method POST -Body $body -ContentType "application/json" -UseBasicParsing
$response.Content

CE QUE Ã‡A FAIT : Teste l'endpoint de prÃ©diction sur votre API dÃ©ployÃ©e
RÃ‰SULTAT ATTENDU : Un JSON avec le prix prÃ©dit


Ã‰TAPE 22.3 : Voir la documentation Swagger
-------------------------------------------
Dans votre navigateur, allez Ã  :
https://$APP_URL/docs

(Remplacez $APP_URL par l'URL que vous avez rÃ©cupÃ©rÃ©e, ou utilisez la variable si elle est toujours dÃ©finie)

RÃ‰SULTAT ATTENDU : La mÃªme interface Swagger que localement, mais sur votre API Azure


Ã‰TAPE 23 : Voir les logs Azure
-------------------------------
COMMANDE :
az containerapp logs show --name $CONTAINER_APP_NAME --resource-group $RESOURCE_GROUP --follow

CE QUE Ã‡A FAIT : Affiche les logs de votre Container App en temps rÃ©el
EXPLICATION : Utile pour dÃ©boguer si quelque chose ne fonctionne pas
POUR ARRÃŠTER : Appuyez sur Ctrl + C


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 8 : CI/CD AVEC GITHUB ACTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CI/CD signifie "Continuous Integration / Continuous Deployment"
Ã‡a veut dire : IntÃ©gration Continue / DÃ©ploiement Continu

EXPLICATION SIMPLE :
  - Chaque fois que vous poussez du code sur GitHub, le dÃ©ploiement se fait automatiquement
  - Plus besoin de faire les Ã©tapes 19-22 manuellement !
  - Ã‡a Ã©conomise du temps et garantit que chaque version du code est testÃ©e et dÃ©ployÃ©e


Ã‰TAPE 24 : PrÃ©parer les secrets GitHub (CRUCIAL)
--------------------------------------------------
Pour que GitHub Actions puisse dÃ©ployer sur Azure, il faut lui donner les permissions.

Ã‰TAPE 24.1 : CrÃ©er un Service Principal Azure
-----------------------------------------------
COMMANDE :
$SUBSCRIPTION_ID = az account show --query id -o tsv
$RESOURCE_GROUP = "rg-mlops-house-price"

az ad sp create-for-rbac `
  --name "github-actions-mlops" `
  --role contributor `
  --scopes /subscriptions/$SUBSCRIPTION_ID/resourceGroups/$RESOURCE_GROUP `
  --sdk-auth

CE QUE Ã‡A FAIT :
  1. CrÃ©e un "Service Principal" (un compte de service)
  2. Ce compte a les permissions de "contributor" sur votre groupe de ressources
  3. --sdk-auth : Formate la sortie en JSON pour GitHub Actions

EXPLICATION :
  - Service Principal : C'est comme un compte robot que GitHub Actions va utiliser
  - Contributor : Le rÃ´le qui permet de crÃ©er/modifier/supprimer des ressources
  - Scopes : Limite les permissions Ã  votre groupe de ressources spÃ©cifique (sÃ©curitÃ©)

TEMPS : 10 Ã  20 secondes
RÃ‰SULTAT ATTENDU : Un gros JSON avec ces clÃ©s :
  {
    "clientId": "...",
    "clientSecret": "...",
    "subscriptionId": "...",
    "tenantId": "...",
    ...
  }

âš ï¸ âš ï¸ âš ï¸ IMPORTANT : COPIEZ TOUT CE JSON ! âš ï¸ âš ï¸ âš ï¸
Vous ne pourrez plus le voir aprÃ¨s. Gardez-le dans un fichier texte temporaire.


Ã‰TAPE 24.2 : RÃ©cupÃ©rer les identifiants ACR
---------------------------------------------
COMMANDE :
$ACR_NAME = "hprmlkamacr"
az acr credential show --name $ACR_NAME --resource-group $RESOURCE_GROUP --query "{username:username,password:passwords[0].value}"

CE QUE Ã‡A FAIT : Affiche le nom d'utilisateur et le mot de passe ACR
RÃ‰SULTAT ATTENDU : Un JSON avec username et password

âš ï¸ IMPORTANT : NOTEZ CES VALEURS aussi !


Ã‰TAPE 25 : Ajouter les secrets dans GitHub
-------------------------------------------
Ã‰TAPE 25.1 : Aller sur GitHub
-------------------------------
1. Allez sur https://github.com
2. Connectez-vous Ã  votre compte
3. Allez dans votre repository (le projet house_price_mlops)


Ã‰TAPE 25.2 : AccÃ©der aux Settings
-----------------------------------
1. Cliquez sur l'onglet "Settings" (en haut de votre repository)
2. Dans le menu de gauche, cherchez "Secrets and variables"
3. Cliquez sur "Actions"


Ã‰TAPE 25.3 : Ajouter le secret AZURE_CREDENTIALS
--------------------------------------------------
1. Cliquez sur "New repository secret"
2. Name : AZURE_CREDENTIALS (exactement comme Ã§a, en majuscules)
3. Secret : Collez le JSON COMPLET de l'Ã‰TAPE 24.1 (tout le JSON entre les accolades {})
4. Cliquez sur "Add secret"


Ã‰TAPE 25.4 : Ajouter le secret ACR_USERNAME
---------------------------------------------
1. Cliquez sur "New repository secret" (encore)
2. Name : ACR_USERNAME
3. Secret : Collez le username de l'Ã‰TAPE 24.2 (juste le nom, pas les guillemets)
4. Cliquez sur "Add secret"


Ã‰TAPE 25.5 : Ajouter le secret ACR_PASSWORD
---------------------------------------------
1. Cliquez sur "New repository secret" (encore)
2. Name : ACR_PASSWORD
3. Secret : Collez le password de l'Ã‰TAPE 24.2 (juste le mot de passe, pas les guillemets)
4. Cliquez sur "Add secret"


VÃ‰RIFICATION :
Vous devriez maintenant avoir 3 secrets dans la liste :
  âœ“ AZURE_CREDENTIALS
  âœ“ ACR_USERNAME
  âœ“ ACR_PASSWORD


Ã‰TAPE 26 : VÃ©rifier le fichier de workflow CI/CD
--------------------------------------------------
Le fichier .github/workflows/ci-cd.yml devrait dÃ©jÃ  exister dans votre projet.

VÃ‰RIFIER QU'IL EXISTE :
COMMANDE :
Test-Path ".github\workflows\ci-cd.yml"

RÃ‰SULTAT ATTENDU : True

SI FALSE : Le fichier n'existe pas, il faut le crÃ©er (mais normalement il devrait Ãªtre lÃ )


Ã‰TAPE 27 : Commit et push pour dÃ©clencher le CI/CD
----------------------------------------------------
Ã‰TAPE 27.1 : PrÃ©parer les changements
---------------------------------------
COMMANDE :
git status

CE QUE Ã‡A FAIT : Montre quels fichiers ont Ã©tÃ© modifiÃ©s
EXPLICATION : Pour voir ce qui va Ãªtre envoyÃ© sur GitHub


Ã‰TAPE 27.2 : Ajouter tous les fichiers modifiÃ©s
-------------------------------------------------
COMMANDE :
git add .

CE QUE Ã‡A FAIT : Ajoute tous les fichiers modifiÃ©s au "staging area"
EXPLICATION : PrÃ©pare les fichiers Ã  Ãªtre commitÃ©s


Ã‰TAPE 27.3 : CrÃ©er un commit
------------------------------
COMMANDE :
git commit -m "Configuration CI/CD et documentation"

CE QUE Ã‡A FAIT : CrÃ©e un "commit" (un point de sauvegarde) avec un message
EXPLICATION : 
  - Un commit = une version sauvegardÃ©e de votre code
  - Le message dÃ©crit ce que vous avez changÃ©


Ã‰TAPE 27.4 : Push vers GitHub
-------------------------------
COMMANDE :
git push origin main

CE QUE Ã‡A FAIT : Envoie vos commits vers GitHub
EXPLICATION : 
  - origin : Le nom du dÃ©pÃ´t distant (GitHub)
  - main : La branche principale

RÃ‰SULTAT ATTENDU : Des messages montrant l'envoi des fichiers, puis "done"


Ã‰TAPE 28 : VÃ©rifier l'exÃ©cution du workflow
---------------------------------------------
Ã‰TAPE 28.1 : Aller sur GitHub
-------------------------------
1. Allez sur votre repository GitHub dans votre navigateur
2. Cliquez sur l'onglet "Actions" (en haut)


Ã‰TAPE 28.2 : Voir le workflow en cours
---------------------------------------
Vous devriez voir :
  - Une ligne avec "CI/CD Pipeline" et un point jaune/orange (en cours)
  - OU un point vert (succÃ¨s) ou rouge (Ã©chec)

Si vous ne voyez rien, attendez 30 secondes et actualisez la page.


Ã‰TAPE 28.3 : Cliquer sur le workflow pour voir les dÃ©tails
-------------------------------------------------------------
1. Cliquez sur la ligne du workflow
2. Vous verrez 2 "jobs" :
   - test : ExÃ©cute les tests pytest
   - build-and-deploy : Build et dÃ©ploie sur Azure

Cliquez sur chaque job pour voir les dÃ©tails de chaque Ã©tape.


Ã‰TAPE 28.4 : Attendre la fin
------------------------------
TEMPS ATTENDU : 5 Ã  10 minutes

CE QUI VA SE PASSER :
1. Le job "test" s'exÃ©cute (1-2 minutes)
   - Si les tests passent â†’ le job "build-and-deploy" commence
   - Si les tests Ã©chouent â†’ tout s'arrÃªte

2. Le job "build-and-deploy" s'exÃ©cute (3-5 minutes)
   - Build l'image Docker
   - Push vers ACR
   - DÃ©ploie sur Azure Container Apps
   - VÃ©rifie que l'API fonctionne

3. Si tout est vert â†’ SUCCÃˆS ! ğŸ‰


Ã‰TAPE 29 : VÃ©rifier le dÃ©ploiement automatique
-----------------------------------------------
Une fois que le workflow est terminÃ© avec succÃ¨s :

COMMANDE :
$APP_URL = az containerapp show --name house-price-api --resource-group rg-mlops-house-price --query properties.configuration.ingress.fqdn -o tsv
Write-Host "URL: https://$APP_URL"

Puis testez :
COMMANDE :
Invoke-WebRequest -Uri "https://$APP_URL/health" -UseBasicParsing

RÃ‰SULTAT ATTENDU : StatusCode 200

FÃ‰LICITATIONS ! ğŸ‰ Votre CI/CD fonctionne maintenant !


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARTIE 9 : COMMANDES UTILITAIRES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Voir les logs Azure en temps rÃ©el :
------------------------------------
az containerapp logs show --name house-price-api --resource-group rg-mlops-house-price --follow

ArrÃªter : Ctrl + C


Mettre Ã  jour le dÃ©ploiement aprÃ¨s des modifications :
-------------------------------------------------------
1. Modifiez votre code
2. Build et push une nouvelle image :
   az acr build --registry hprmlkamacr --image house-price-api:v2 --file Dockerfile .

3. Mettre Ã  jour la Container App :
   az containerapp update --name house-price-api --resource-group rg-mlops-house-price --image hprmlkamacr.azurecr.io/house-price-api:v2

OU SIMPLEMENT :
- Faites un commit et push sur GitHub
- Le CI/CD s'occupera du reste automatiquement !


Supprimer les ressources Azure (pour Ã©conomiser de l'argent) :
----------------------------------------------------------------
COMMANDE :
az group delete --name rg-mlops-house-price --yes

CE QUE Ã‡A FAIT : Supprime TOUT le groupe de ressources (ACR, Container Apps, etc.)
ATTENTION : C'est dÃ©finitif ! Toutes vos ressources seront supprimÃ©es.
POURQUOI : Pour ne pas payer pour les ressources quand vous ne les utilisez pas


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CHECKLIST FINALE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â˜ Python installÃ© et dans le PATH
â˜ Git installÃ©
â˜ Environnement virtuel crÃ©Ã© et activÃ©
â˜ DÃ©pendances installÃ©es (pip install -r requirements.txt)
â˜ DonnÃ©es prÃ©parÃ©es (data/house_prices_clean.csv existe)
â˜ ModÃ¨le entraÃ®nÃ© (model/house_price_model.pkl existe)
â˜ API locale fonctionne (http://localhost:8000/health retourne 200)
â˜ Tests pytest passent (pytest tests/ -v)
â˜ (Optionnel) Docker fonctionne localement
â˜ Azure CLI installÃ© et connectÃ© (az login)
â˜ Ressources Azure crÃ©Ã©es (ou script deploy.ps1 exÃ©cutÃ© avec succÃ¨s)
â˜ API dÃ©ployÃ©e sur Azure accessible (https://votre-url/health retourne 200)
â˜ Secrets GitHub configurÃ©s (AZURE_CREDENTIALS, ACR_USERNAME, ACR_PASSWORD)
â˜ Workflow CI/CD exÃ©cutÃ© avec succÃ¨s (onglet Actions sur GitHub)
â˜ DÃ©ploiement automatique fonctionne


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PROBLÃˆMES COURANTS ET SOLUTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLÃˆME : "python n'est pas reconnu"
SOLUTION : Python n'est pas dans le PATH. RÃ©installez Python en cochant "Add Python to PATH"

PROBLÃˆME : "cannot be loaded because running scripts is disabled"
SOLUTION : ExÃ©cutez dans PowerShell Admin : Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser

PROBLÃˆME : "ModuleNotFoundError" lors des tests
SOLUTION : Activez l'environnement virtuel : .\venv\Scripts\Activate.ps1

PROBLÃˆME : "ACR name already exists"
SOLUTION : Le nom ACR est dÃ©jÃ  pris. Changez $ACR_NAME dans vos variables avec un nom unique

PROBLÃˆME : L'API retourne 503 aprÃ¨s dÃ©ploiement
SOLUTION : L'API met 1-2 minutes Ã  dÃ©marrer. Attendez et rÃ©essayez. VÃ©rifiez les logs : az containerapp logs show ...

PROBLÃˆME : Les tests Ã©chouent dans GitHub Actions
SOLUTION : VÃ©rifiez que les tests passent localement d'abord : pytest tests/ -v

PROBLÃˆME : Le workflow GitHub Actions Ã©choue sur "Azure Login"
SOLUTION : VÃ©rifiez que le secret AZURE_CREDENTIALS contient le JSON COMPLET de az ad sp create-for-rbac

PROBLÃˆME : "Resource group not found"
SOLUTION : VÃ©rifiez que vous Ãªtes dans le bon abonnement Azure : az account show


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  NOTES FINALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- Ce guide couvre TOUT le processus de A Ã  Z
- Prenez votre temps, lisez chaque explication
- Si quelque chose ne fonctionne pas, relisez l'explication de cette Ã©tape
- Les ressources Azure peuvent gÃ©nÃ©rer des coÃ»ts (mÃªme si le niveau gratuit existe)
- N'oubliez pas de supprimer les ressources si vous ne les utilisez plus
- Le CI/CD est la meilleure faÃ§on de dÃ©ployer : automatique et fiable

BONNE CHANCE ! ğŸš€
